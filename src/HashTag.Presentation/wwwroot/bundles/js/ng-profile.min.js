(function(){function t(n,t){n.when("/",{templateUrl:t+"profile.html",controller:"profileController",controllerAs:"vm"})}var n;angular.injector(["ng","core"]).invoke(function(t){n=t});angular.module("profile",["core","ngRoute","angularFileUpload","ui.bootstrap","luegg.directives","infinite-scroll"]).config(t).constant("PAHT_TEMPLATES",n+"profile/templates/")})(),function(){function n(n){function t(t){return n.get(`api/users/get/${t}`)}function i(t,i){return n.get(`api/users/getProfilePhotos/${t}/${i}`)}function r(t){return n.post("api/users/setProfilePhoto",{id:t})}return{getProfileInfo:t,getProfilePhotos:i,setPhotoAsProfile:r}}angular.module("profile").service("profileService",n);n.$inject=["communicationService"]}(),function(){function n(n,i){function r(r){const u=n.open({animation:!0,templateUrl:i+"addPhotosModal.html",controller:t,controllerAs:"modalVM",resolve:{uploadPhotoCallBack:function(){return r}}})}return{openModal:r}}function t(n,t,i,r){function h(n){const r=new i;r.queue.push(n);n.uploader=r;t.computeDescriptionAndHashTags(n)}function o(n){n.isUploading=!0;n.onComplete=function(t){n.isUploaded=!1;n.isUploading=!1;n.isSuccess=!1;n.isError=!1;t.success?(n.isSuccess=!0,showAlerts(t.alerts),$.extend(n,t.data),r(n),--e==0&&f&&s()):(n.isError=!0,showAlerts(t.alerts))};t.uploadPhoto(n)}function c(n){u.uploader.removeFromQueue(n)}function l(){f=!0;e=u.uploader.queue.length;u.uploader.queue.forEach(function(n){!n.descriptionComputed||n.isUploading||n.isSuccess||o(n)})}function s(){n.close()}function a(){n.dismiss("cancel")}const u=this;var f=!1,e=0;u.uploader=new i;u.uploader.onAfterAddingFile=h;u.uploadPhoto=o;u.removePhoto=c;u.uploadAllPhotos=l;u.done=s;u.cancel=a}angular.module("profile").service("addPhotosModalService",n);n.$inject=["$uibModal","PAHT_TEMPLATES"]}(),function(){function n(n,t,i,r,u,f,e,o,s){function c(){return h.photos=[],h.errors=[],h.isLoading=!0,h.feedStopped=!1,h.feedTrigger++,e.getProfileInfo(h.userName).then(function(n){n.success?(h.fullName=n.data.fullName,h.profilePhoto=n.data.profilePhoto,h.userName=n.data.userName,h.currentUserName=n.data.currentUserName,h.showAddButton=h.userName===h.currentUserName):h.errors=n.messages;h.isLoading=!1})}function l(){s.openModal(a)}function a(n){h.photos.splice(0,0,n)}function v(n){t.location.href=f.appUrl(`search/${n}`)}function y(){return h.feedStopped?!1:e.getProfilePhotos(h.userName,h.photos.length).then(function(n){return n.success?h.feedStopped=n.data.length===0:h.errors=n.messages,n})}function p(n){return e.setPhotoAsProfile(n).then(function(n){return c(),i.hash("profile-top"),r(),n})}function w(n){return o.deletePhoto(n).then(function(n){return c(),n})}var h=this;h.userName=n.$parent.userName;h.fullName="";h.profilePhoto={};h.feedTrigger=0;h.openAddPhotosModal=l;h.toHashTagSearch=v;h.feedMore=y;h.setPhotoAsProfile=p;h.deletePhoto=w;c()}angular.module("profile").controller("profileController",n);n.$inject=["$scope","$window","$location","$anchorScroll","DEFAULT_URL","communicationService","profileService","photoService","addPhotosModalService"]}();
(function(){const t=document.getElementById("default-url").value,n=`${t}/clientapp/`.replace("//","/");angular.module("core",["bootstrapLightbox"]).constant("DEFAULT_URL",t).constant("CLIENT_APP_URL",n).constant("PAHT_TEMPLATES",n+"core/templates/").constant("PATH_DIRECTIVES_TEMPLATES",n+"core/templates/directives/").config(function(n,t,i){n.templateUrl=t+"customLightbox.html";i.errorOnUnhandledRejections(!1)})})(),function(){function n(n,t){function i(n){return t+n}function f(t){return n.get(i(t)).then(r,u)}function e(t,f){return n.post(i(t),f).then(r,u)}function o(t,f){return n.put(i(t),f).then(r,u)}function s(t){return n.delete(i(t)).then(r,u)}function r(n){return showAlerts(n.data.alerts),n.data}function u(n){return n.status===404&&(n.data={succes:!1,alerts:[{"class":"error",message:"Page not found!"}],data:{}}),showAlerts(n.data.alerts),n.data}return{appUrl:i,get:f,post:e,put:o,"delete":s}}angular.module("core").service("communicationService",n);n.$inject=["$http","DEFAULT_URL"]}(),function(){function n(n){function t(t,i){t.url=n.appUrl("api/photos/prediction");t.isSuccess=!1;t.isUploaded=!1;t.prediction=[];t.onComplete=function(n){t.isSuccess=!1;t.isUploaded=!1;n.success&&(t.prediction=n.data.prediction,i(n.data.prediction))};t.upload()}function i(t){t.url=n.appUrl("api/photos/descriptionAndHashTags");t.description="";t.isSuccess=!1;t.isUploaded=!1;t.onComplete=function(n){t.isSuccess=!1;t.isUploaded=!1;t.descriptionComputed=!0;n.success?(t.description=n.data.description,t.hashTags=n.data.hashTags):(t.description="",t.hashTags="")};t.upload()}function r(t){t.url=n.appUrl("api/photos/post");t.formData[0]={description:t.description,hashtags:t.hashTags};t.upload()}function u(t){return n.post("api/photos/delete",{id:t})}return{computePrediction:t,computeDescriptionAndHashTags:i,uploadPhoto:r,deletePhoto:u}}angular.module("core").service("photoService",n);n.$inject=["communicationService"]}(),function(){function n(n,t,i){function r(n){function t(t){n.searchByHashTagFn({hashTag:t})}function r(t){n.setPhotoAsProfileFn({id:t})}function u(t){n.deletePhotoFn({id:t})}function f(t){i.openModal(n.photos,t)}n.searchByHashTag=t;n.setPhotoAsProfile=r;n.deletePhoto=u;n.openLightboxModal=f}return{link:r,restrict:"E",scope:{photos:"=",searchByHashTagFn:"&",setPhotoAsProfileFn:"&",deletePhotoFn:"&"},templateUrl:t+"photosGrid.html"}}angular.module("core").directive("photosGrid",n);n.$inject=["$timeout","PATH_DIRECTIVES_TEMPLATES","Lightbox"]}(),function(){function n(){function n(n,t){t.on("keypress",function(n){this.value.length===0&&(this.value=`#${this.value}`);n.which===32&&(n.preventDefault(),this.value[this.value.length-1]!=="#"&&(this.value=`${this.value}#`))})}return{link:n,restrict:"A"}}angular.module("core").directive("hashtags",n)}(),function(){function n(n){function t(t,i){const r=angular.element(i),u=n("<input type='file' class='file-upload' nv-file-select uploader='uploader' multiple />")(t);r.append(u)}return{link:t,restrict:"A",scope:{uploader:"="}}}angular.module("core").directive("fileButton",n);n.$inject=["$compile"]}(),function(){function n(n){function i(n,i){function r(n){const t=new FileReader;t.onload=u;t.readAsDataURL(n)}function u(n){const t=new Image;t.onload=f;t.src=n.target.result}function f(){let u=i.find("canvas"),t=n.width,r=n.height;this.height>this.width?t=Math.min(this.width/this.height*n.height,n.width):r=Math.min(this.height/this.width*n.width,n.height);u.attr({width:t,height:r});u[0].getContext("2d").drawImage(this,0,0,t,r)}function e(){const n=i.find("canvas");n.removeAttr("height");n[0].getContext("2d").clearRect(0,0,n.width(),n.height())}t.support&&n.$watch("photo",function(i,u){if(i!==undefined||u!==undefined){if(!t.isFile(n.photo)||!t.isImage(n.photo)){e();return}r(n.photo)}})}var t={support:!!(n.FileReader&&n.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof n.File},isImage:function(n){const t=`|${n.type.slice(n.type.lastIndexOf("/")+1)}|`;return"|jpg|png|jpeg|bmp|gif|".indexOf(t)!==-1}};return{link:i,restrict:"A",scope:{photo:"=",height:"=",width:"=",maxWidth:"="},template:"<canvas/>"}}angular.module("core").directive("upPhotoPreview",n);n.$inject=["$window"]}(),function(){function n(n,t){function i(n){function t(){n.isFeeding=!0;const t=n.feedMoreFn();typeof t=="object"&&t!==null?t.then(function(t){n.isFeeding=!1;t.success&&(n.photos.push.apply(n.photos,t.data),n.feedStopped=t.data.length===0)}):n.isFeeding=!1}function i(t){n.searchByHashTagFn({hashTag:t})}function r(t){n.setPhotoAsProfileFn({id:t})}function u(t){n.deletePhotoFn({id:t})}n.isFeeding=!1;n.feedMore=t;n.searchByHashTag=i;n.setPhotoAsProfile=r;n.deletePhoto=u;n.$watch("feedTrigger",function(){t()},!0)}return{link:i,restrict:"E",scope:{photos:"=",feedTrigger:"=",feedMoreFn:"&",searchByHashTagFn:"&",setPhotoAsProfileFn:"&",deletePhotoFn:"&"},templateUrl:t+"infinitePhotosGrid.html"}}angular.module("core").directive("infinitePhotosGrid",n);n.$inject=["$timeout","PATH_DIRECTIVES_TEMPLATES"]}();